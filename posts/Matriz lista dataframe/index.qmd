---
title: "4. Vectores, Matrices, listas y dataframes"
description: "Objetos m치s complejos, distinguirlos y extraer informaci칩n"
author: "Gabriel Andrade Ponce"
date: "2022-11-24"
---

# Vectores

Los vectores son objetos que llevan una colecci칩n de uno o m치s datos del mismo tipo. El tipo del vector es igual al tipo de datos que contiene y solo puede contener datos del mismo tipo. Los vectores tambi칠n tienen un largo, es decir el n칰mero de datos que contiene.

![](vectors.png){fig-align="center"}

En esencia un solo n칰mero o car치cter es un vector de largo 1

```{r}
minivec <- 25
is.vector(minivec)
length(minivec)
```

## Concatenar

Para generar vectores de mayor tama침o debemos usar la funci칩n de `c()`o concatenar.

```{r}
# Vector numerico
vec1 <- c(1,223,4,5)
length(vec1)
class(vec1)

# Vector de caracteres
vec2 <- c("a", "b", "c", "d")
class(vec2)

# Vector l칩gico

vec3 <- c(TRUE, FALSE, TRUE, FALSE)
class(vec2)

# Si admite NA

vec4 <- c(2.5, 30, 45.5, NA)
class(vec4)
```

Podemos incluso concatenar objetos que contengan vectores de la misma clase

```{r}
vec5 <- c(27,28,29,30)
(vec6 <- c(vec1, vec5))
```

쯈ue sucede cuando creamos un vector con dos tipos de datos?

```{r}
vec7 <- c(1,2,3, "4")
class(vec7)
```

![](/posts/Ayuda%20R/teletubo.png){fig-align="center" width="290"}

## Secuencias

Podemos crear vectores mediante funci칩n de secuencia. Cuando es una secuencia sencilla podemos usar el comando `:`. Si necesitamos secuencias m치s espec칤ficas o con ciertas caracter칤sticas, entonces podemos usar la funci칩n `seq`. 칄sta funci칩n tiene varios argumentos, `from` es el n칰mero de inicio, el `to` el n칰mero final, `length.out` sirve para controlar el largo del vector y mediante `by` podemos especificar el intervalo de la secuencia.

```{r}

(vec_seq1 <- 1:10)

(vec_seq2 <- seq(from=1, # Valor de inicio
               to= 6,
               length.out= 10)) # Valor final

(vec_seq3 <- seq(from= 1,
                to= 10,
                by= 0.5))
```

## Repetir valores

`rep` permite repetir valores un determinado n칰mero de veces. El argumento de `times` nos permite especificar el n칰mero de veces que un valor o un vector se va a repetir. Cuando especificamos `each` podemos controlar el n칰mero de veces que se repite cada valor dentro del vector.

```{r}
(vec_rep1 <- rep(x=25,
                times= 5))
(vec_rep2 <- rep(vec_rep1,
                 times=3))

(vec_rep3 <- rep(vec2,
                each=3))
```

## Caso de factores

Los factores son un caso especial de los caracteres y tienen la peculiaridad de que est치n compuestos por niveles. En otras palabras los factores pueden asumir un n칰mero limitado de valores posibles conocidos o niveles.

Por ejemplo, imaginemos un experimento donde se aplica el tratamiento de sombra a unas plantas en crecimiento. En este caso el tratamiento de sombra es un factor y puede tomar "si" cuando tiene sombra o "no" cuando no se aplic칩 sombra. Para crear un factor usamos la funci칩n `factor`

```{r}
somb <- c(rep("si", 5), rep("no", 5))

fact_somb <- factor(somb)

class(somb)
class(fact_somb)
```

Es importante especificar los factores porque muchos funciones y an치lisis estad칤sticos requieren de usar objetos de tipo factor.

## Crear vectores basados en n칰meros aleatorios

Podemos crear vectores basados en n칰meros al azar basados en una distribuci칩n. Por ejemplo, la m치s com칰n es la distribuci칩n normal y se crea mediante `rnorm`. 칄sta funci칩n hace parte de una familia de funciones basadas en distribuciones (ver help de rnorm) y b치sicamente genera n칰meros aleatorios basados en una distribuci칩n normal.

```{r}
# en este ejemplo vamos a crear un vector de 100 valores
vec_norm <- rnorm(100, 
                  mean = 0, 
                  sd=1)
is.vector(vec_norm)
```

## Selecci칩n de elementos

En los vectores podemos seleccionar valores con `[]` , el n칰mero que pongamos dentro ser치 la posici칩n del valor que seleccionaremos

```{r}
vec_rep3[1] # el primer valor
vec_rep2[5] # el quinto valor

```

Podemos seleccionar varios valores utilizando el comando de concatenar

```{r}
vec_seq3[c(1,5,9)] # Seleccionamos el primer, el quinto y el 9 valor
```

## Operaciones de vectores

Las operaciones aritm칠ticas y l칩gicas tambi칠n funcionan con vectores. Pero en este caso obtenemos un resultado por cada elemento

```{r}
(vec_sum <- vec_seq3 + 5)
```

```{r}
vec_seq3 > 5
```

# Matrices

Las matrices son vectores multi-dimensionales y al igual que los vectores solo pueden contener un tipo de datos. Las matrices tienen dos dimensiones "alto" dado por el n칰mero de filas y "largo" por el n칰mero de columnas.

![](Matrix.png)

Podemos crear una matriz a partir de un vector, especificando las dimensiones de columnas por medio de la funci칩n `matrix`. Los argumentos de `nrow` y `ncol` ayudan a definir el n칰mero de filas y columnas respectivamente.

```{r}
(x1 <- matrix(1:20))

# Podemos especificar las columnas y las filas

matrix(1:20, nrow = 5, ncol = 4)

matrix(1:20, nrow = 10, ncol = 10)

matrix(1:20, nrow = 4, ncol = 3)

```

A veces es m치s intuitivo unir dos o m치s vectores previamente existentes, por lo que en estos casos podemos combinarlos por filas `rbind` o por columnas `cbind` .

```{r}
v1 <- 1:4
v2 <- 9:12
v3 <- 13:16

(m1 <- rbind(v1, v2, v3))
(m3 <- cbind(v1, v2, v3))
class(m1)

v4 <- 20:28

m2 <- rbind(v1,v4)
```

Se pueden combinar vectores de distinto tipo, pero el de tipo car치cter siempre transformar치 al num칠rico. Entonces, cuidado con lo que combinan.

```{r}
v5 <- c("1", "2", "3", "4")

(m4 <- cbind(v1, v5))
str(m4)
dim(m4)
class(m4)
```

## Operadores de matrices

Se pueden usar operadores aritm칠ticos en matrices de tipo num칠rico.

```{r}
m2+1
# m4+1


```

Podemos hacer uso de la funci칩n `t()` para transponer una matriz

```{r}
# Podemos transponer una matriz
m3t <- t(m3)
```

## Selecci칩n de valores

Igual que en los vectores podemos usar`[]` para seleccionar valores. La gr치n diferencia es que como las matrices son de 2 dimensiones, debemos especificar ambas en los par칠ntesis y separarlos por una coma: \[filas , columnas\]. Cuando seleccionamos m치s de una fila o columna podemos usar `c` para concatenar el vector de selecci칩n. Cuando ponemos un signo de "menos" (-) dentro de los par칠ntesis de selecci칩n, vamos a eliminar dicha columna o fila.

```{r}

# Vamos a seleccionar la fila 1 y 3 de m3
m3[c(1,3),]

#Tabi칠n podemos seleccionar valores de la diagonal por medio de diag
diag(m3)
diag(m3t)

# Eliminar la fila 1 y seleccionar la columna 2
m3[-1,2]

# Eliminar las filas 1 y 4, y seleccionar las columnas 1 y 3
m3[c(-1,-4), c(1,3)]
```

Cunado usamos los selectores al lado izquierdo de la definici칩n de objeto, podemos reemplazar los valores, por los que estamos definiendo.

```{r}
# Podemos reemplazar valores de las matrices

# Reemplazar la segunda fila por 100, 200 y 300
m3[2,] <- c(100,200, 300)
m3

# Reemplazar fila 4 y 3 y columna 2 por 1000
m3[c(4,3),2] <- 1000
m3

# Reemplaza 1 y 3 fila y 1 y 3 fila por 500
m3[c(1,3), c(1,3)] <- 500
m3

# Reemplaza la tercea columna por la 1 columna m치s 3
m3[,3] <- m3[,1]+3 
m3
```

## Array

![](array.png){fig-align="center"}

El array es un tipo matriz, pero con m치s de dos dimensiones 游땻游뱚. Las array, al igual que las matrices, solo pueden ser formadas por objetos del mismo tipo. Podemos usar la funci칩n `array` y definir filas, columnas y tercera dimensi칩n

```{r}

AR1 <- array(1:30, dim = c(3,4,2))
AR1
class(AR1)
dim(AR1)
str(AR1)
# Seleccionar la celda con el valor de 13
x <- AR1[,,2]
```

# Data Frame

![](dataframe.png){fig-align="center"}

Los data frames al igual que las matrices son objetos de dos dimensiones, pero pueden tener diferentes tipos de datos. 칄sta caracter칤stica los convierte en uno de los objetos m치s usados para muchos tipos de an치lisis, por su versatilidad. En general se puede entender las filas de un dataframe como observaciones, casos o individuos y las columnas como variables.

En los data frames cada columna puede ser de distinto tipo pero todas tienen que ser del mismo largo

```{r}
col1 <- 1:5
col2 <- c("Z", "W", "L", "M", "R")
col3 <- c(TRUE, FALSE, FALSE, TRUE, FALSE)

df1 <- data.frame(numeros= col1,
                  letras= col2,
                  logico= col3)

```

Podemos usar la funci칩n `view` para visualizar el dataframe

```{r}
#| eval: false
View(df1)
```

```{r}
#| echo: false
DT::datatable(df1)
```

Podemos extraer diferentes caracter칤sticas de los data frames

```{r}
# las dimensiones
dim(df1)

# Los nombres de las columnas
names(df1)

# La clase
class(df1)
```

Podemos transformar una matriz a un data frame o un data frame con solo n칰meros a una matriz.

```{r}
df2 <- as.data.frame(m3)
df2
```

## Seleccionar en data frame

En los data frames tambi칠n podemos seleccionar valores por medio de `[]` , incluyendo los nombres de las columnas

```{r}
# Seleccionar primera columna
df1[,1]

# Seleccionar primera fila
df1[1,]

# Seleccionar por nombres
df1[c("letras", "logico")]
```

Otra manera muy com칰n de seleccionar columnas en un data frame es por medio de `$` . El operador de peso selecciona el objeto conservando su clase original, es decir el data frame

```{r}
(letras2 <- df1$letras)
```

# Lista

![](Litst.png){fig-align="center"}

Las listas como los vectores son de una sola dimensi칩n. Sin embargo, pueden tener diferentes tipos de valores e incluso de elementos. Una lista puede tener dentro un vector, una matriz, un data frame e incluso otra lista

```{r}

v <- 1:10
df <- data.frame(num= 1:4, letra= letters[1:4])

lista <- list(vector=v, dataframe= df, Matriz= m3)

dim(lista)
length(lista)

```

Podemos utilizar los selectores que ya vimos en las listas

```{r}
# selecci칩n que resulta en lista
(v2 <- lista[1])

# Selecci칩n que termina en vector
(v3 <- lista[[1]])
class(v3)

# Selecci칩n de dataframe
(df_list <- lista[[2]])

# Selecci칩n termina en matriz
(mat <- lista$Matriz)


```
